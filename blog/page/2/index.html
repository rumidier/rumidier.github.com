
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Meadows of wild horses</title>
  <meta name="author" content="rumidier">

  
  <meta name="description" content="청구 내역 수정 List-edit-action 수정 되어야할 $edit_id를 받을수 있어햐 한다. sub edit :Local :CaptureArgs(1) {
my ( $self, $c, $edit_id ) = @_; 수정할 폼을 제출 했을때 업데이트 동작 혹은 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rumidier.github.com/blog/page/2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Meadows of wild horses" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Meadows of wild horses</a></h1>
  
    <h2>Blog...</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rumidier.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/12/list-edit/">List-edit</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-12T13:56:00+09:00" pubdate data-updated="true">Jul 12<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/07/12/list-edit/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>청구 내역 수정</h2>

<p><a href="https://gist.github.com/3095912">List-edit-action</a></p>

<p>수정 되어야할 $edit_id를 받을수 있어햐 한다.</p>

<pre><code>sub edit :Local :CaptureArgs(1) {
my ( $self, $c, $edit_id ) = @_;
</code></pre>

<p>수정할 폼을 제출 했을때 업데이트 동작 혹은 정보 출력을 하여야 한다.</p>

<pre><code>if ($c-&gt;req-&gt;method eq 'POST') {
    my @messages;

    push @messages, 'amount is invaild' if ($c-&gt;req-&gt;params-&gt;{amount} !~ /^\d+$/);
    push @messages, 'title is required' unless ($c-&gt;req-&gt;params-&gt;{title});

    if (@messages) {
    $c-&gt;flash(
        messages =&gt; @messages,
        comment  =&gt; $c-&gt;req-&gt;params-&gt;{comment},
        title    =&gt; $c-&gt;req-&gt;params-&gt;{title},
        amount   =&gt; $c-&gt;req-&gt;params-&gt;{amount},
    );

    return $c-&gt;res-&gt;redirect($c-&gt;uri_for("/list/view/$c-&gt;req-&gt;params-&gt;{charge_id}"));
    }

    my $time = strftime "%Y-%m-%d %H:%M:%S", localtime;
    my %row = (
    id         =&gt; $c-&gt;req-&gt;params-&gt;{charge_id},
    amount     =&gt; $c-&gt;req-&gt;params-&gt;{amount},
    user       =&gt; $c-&gt;req-&gt;params-&gt;{charge_user},
    title      =&gt; $c-&gt;req-&gt;params-&gt;{title},
    comment    =&gt; $c-&gt;req-&gt;params-&gt;{comment},
    updated_on =&gt; "$time",
    );
    $c-&gt;model('DonDB')-&gt;resultset('Charge')-&gt;update_or_create(\%row);

    $c-&gt;res-&gt;redirect($c-&gt;uri_for("/list/view/$row{id}"));
}
else {
    my $editer = $c-&gt;model('DonDB')-&gt;resultset('Charge')-&gt;find($edit_id);

    $c-&gt;stash(
    editer =&gt; $editer,
    );
}
}
</code></pre>

<p><a href="https://gist.github.com/3095922">List-edit.tt</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/12/list-write/">List-write</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-12T13:49:00+09:00" pubdate data-updated="true">Jul 12<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/07/12/list-write/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://gist.github.com/3095879">List-write.tt</a>
<a href="https://gist.github.com/3095901">List-write-action</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/12/list-view/">List-view</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-12T13:41:00+09:00" pubdate data-updated="true">Jul 12<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/07/12/list-view/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://gist.github.com/3095846">List-view-action</a>
<a href="https://gist.github.com/3095858">List-view.tt</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/11/list/">List</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-11T23:06:00+09:00" pubdate data-updated="true">Jul 11<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/07/11/list/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>청구 목록 페이지</h2>

<p><a href="https://gist.github.com/3095682">List.pm - index</a></p>

<p><a href="https://gist.github.com/3095679">/list/index.tt</a></p>

<h2>List Controller - Query option</h2>

<p>등록 날짜 역순 출력을 위한 내림 차수 옵션을 준다.</p>

<pre><code>my %attr  = ( 'order_by' =&gt; { -desc =&gt; 'me.id' } );

my $total_charge;
my %cond    = ();
</code></pre>

<p>현재 가르켜야 할 페이지 정보가 없다면 1페이지로 하게 한다.</p>

<pre><code>my $page    = $c-&gt;req-&gt;params-&gt;{page};
$attr{page} = $page || 1;
</code></pre>

<p>status 옵션이 정의 되지 않았다면 전체(대기/승인/거부) 검색을 할수 있게 한다.</p>

<pre><code>my $status  = $c-&gt;req-&gt;param("status") || $c-&gt;stash-&gt;{"status"} || '0'; #수정 필요
</code></pre>

<p>status 옵션 없으면 전체 있으면 상태 검색 할수 있게 한다.</p>

<pre><code>%cond         = ( status =&gt; $status ) if $status;
$total_charge = $c-&gt;model('DonDB')-&gt;resultset('Charge')-&gt;search(\%cond, \%attr);
</code></pre>

<p>Data::Pageset활용 하여 페이징 할수 있다.</p>

<pre><code>my $page_info =
Data::Pageset-&gt;new(
    {
    ( map { $_ =&gt; $total_charge-&gt;pager-&gt;$_ } qw/entries_per_page total_entries current_page/ ),
    mode =&gt; "slide",
    pages_per_set =&gt; 10,
    }
);

$c-&gt;stash(
    lists   =&gt; [ $total_charge-&gt;all ],
    status  =&gt; $status,
    pageset =&gt; $page_info,
);
}
</code></pre>

<h2>List - View</h2>

<p>성공 혹은 실패 메세지 출력을 할수 있게 한다.</p>

<pre><code>[% IF messages %]
&lt;div class="alert fade in"&gt;
&lt;button class="close" data-dismiss="alert"&gt;&amp;times;&lt;/button&gt;
[% messages %]
&lt;/div&gt;
[% END %]
</code></pre>

<p>탭 등록으로 원하는 상태의 값들만 보여 줄수 있게 한다.</p>

<pre><code>&lt;div class="container-fluid"&gt;
  &lt;div class="row-fluid"&gt;
&lt;div class="span2"&gt;
  &lt;ul class="nav nav-tabs nav-stacked"&gt;
    &lt;li class="active"&gt;&lt;a href="/list"&gt;전체&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="/list?status=1"&gt;대기&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="/list?status=2"&gt;승인&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="/list?status=3"&gt;거부&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
</code></pre>

<p>현재 경로가 어떻게 되는지 확인 할수 있도록 한다.</p>

<pre><code>&lt;div class="span10"&gt;
  &lt;ul class="breadcrumb"&gt;
    &lt;li&gt;목록
        &lt;span class="divider"&gt;/&lt;/span&gt;
    &lt;/li&gt;      
    &lt;li class="active"&gt;
    [% IF status == "1" %]
        &lt;b&gt; 대기 &lt;/b&gt;
    [% ELSIF status == "2" %]
        &lt;b&gt; 승인 &lt;/b&gt;
    [% ELSIF status == "3" %]
        &lt;b&gt; 거부 &lt;/b&gt;
    [% ELSE %]
        &lt;b&gt; 전체 &lt;/b&gt;
    [% END %]     
    &lt;/li&gt;
  &lt;/ul&gt;
</code></pre>

<h2>CPAN</h2>

<p><a href="https://metacpan.org/module/Data::Pageset">Data::Pageset</a></p>

<p><a href="https://metacpan.org/module/DBIx::Class::Manual::DocMap">DBIx::Class::Manual::DocMap</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/11/catalyst-signup/">Catalyst-signup</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-11T22:55:00+09:00" pubdate data-updated="true">Jul 11<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/07/11/catalyst-signup/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Signup Controller <a href="https://gist.github.com/3090526">Login.pm</a></p>

<pre><code>$ vi lib/MyApp/Controller/Login.pm
# 내용 추가
</code></pre>

<h2>:Private</h2>

<p>forword 혹은 detach로만 접근이 가능 하며, URL로 부터 바로 접근이 불가능 합니다.</p>

<pre><code>sub signup :Path('/signup') :Args(0) {
my ( $self, $c ) = @_;

$c-&gt;detach('signup_POST') if $c-&gt;req-&gt;method eq 'POST';
}

sub signup_POST :Private {
my ( $self, $c ) = @_;
</code></pre>

<h2>Validation - Empty Value</h2>

<p>입력값중에 빈값이 있으면 안돼므로 빈값인지 확인 하여 빈값일시 메세지를
출력 할수 있게 작업한다.</p>

<pre><code>my $user_name = $c-&gt;req-&gt;param('user_name') || '';
my $email     = $c-&gt;req-&gt;param('email')     || '';
my $password  = $c-&gt;req-&gt;param('password')  || '';

my @messages;
push @messages, 'Input the user name'     unless $user_name;
push @messages, 'Input the user email'    unless $email;
push @messages, 'Input the user password' unless $password;

if (@messages) {
    $c-&gt;flash(
        messages =&gt; @messages,
    );

    return $c-&gt;res-&gt;redirect($c-&gt;uri_for('/signup'));
}
</code></pre>

<h2>Validation - DB Unique search</h2>

<p>User table에 user_name과 email이 동일한 값이 있는지 확인 하여 동일한
값이 있을시 error_msg를 출력 할수 있게 한다.</p>

<pre><code>my $cond = {};
$cond-&gt;{'me.user_name'} = "$user_name";
my $name_search = $c-&gt;model('DonDB')-&gt;resultset('User')-&gt;search($cond);
if ($name_search-&gt;count) {
    $c-&gt;flash(
        messages =&gt; 'Using ID again input the New ID',
    );

    return $c-&gt;res-&gt;redirect($c-&gt;uri_for('/signup'));
}

$cond = {} if $cond;
$cond-&gt;{'me.email'} = "$email";
my $email_search = $c-&gt;model('DonDB')-&gt;resultset('User')-&gt;search($cond);
if ($email_search-&gt;count) {
    $c-&gt;flash(
        messages      =&gt; 'Using email again input the New email',
    );

    return $c-&gt;res-&gt;redirect($c-&gt;uri_for('/signup'));
}
</code></pre>

<h2>유저 등록</h2>

<p>Validation이 통과 했다면 테이블에 등록 할수 있게 한다.
실패시 signup페이지로 다시 이동 하며</p>

<pre><code>my $time    = strftime "%Y-%m-%d %H:%M:%S", localtime;
my $created = $c-&gt;model('DonDB::User')-&gt;create({
    user_name  =&gt; $user_name,
    email      =&gt; $email,
    password   =&gt; $password,
    created_on =&gt; "$time",
    updated_on =&gt; "$time",
});

$c-&gt;res-&gt;redirect($c-&gt;req-&gt;uri) unless $created;
</code></pre>

<h2>유저 등록 - 확인</h2>

<p>등록후 이름과 패스워드를 확인하여 다음 페이지 혹은 tdpfjaptpwldhk 냐혀ㅔvpdlwlfmf ghcnfgksek.</p>

<pre><code>if ($c-&gt;authenticate({ user_name =&gt; $user_name, password =&gt; $password } )) {
    $c-&gt;res-&gt;redirect($c-&gt;uri_for($c-&gt;controller('List')-&gt;action_for('index')));
} else {
    $c-&gt;stash(error_msg =&gt; "Bad username or password."); # maybe flash?
    $c-&gt;res-&gt;redirect($c-&gt;req-&gt;uri);
}
</code></pre>

<p>}</p>

<p>Signup View.tt <a href="https://gist.github.com/3090541">signup.tt</a></p>

<pre><code>$ vi root/templates/default/src/login/signup.tt
# 내용 추가
</code></pre>

<h2>jquery 미사용</h2>

<p>현재 Validation은 컨트롤 단에서만 검사 한다
추가가 필요함</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/11/catalyst-login/">Catalyst-Login</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-11T20:44:00+09:00" pubdate data-updated="true">Jul 11<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/07/11/catalyst-login/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://metacpan.org/module/Catalyst::Manual::Tutorial::05_Authentication">Catalyst::Manual::Tutorial::05_Authentication</a></p>

<h2>Load plugins</h2>

<p>/lib/MyApp.pm</p>

<pre><code>$ vi ./lib/MyApp/Web/MyApp.pm

# 아래에 다음과 같이 추가
use Catalyst qw/
-Debug
ConfigLoader
Static::Simple
Unicode::Encoding

StackTrace

Authentication

Session
Session::Store::File
Session::State::Cookie
/;
</code></pre>

<p>MakeFile.PL</p>

<pre><code>$ vi Makefile.PL

# 추가
requires 'Catalyst::Plugin::Authentication';
requires 'Catalyst::Plugin::Session';
requires 'Catalyst::Plugin::Session::Store::File';
requires 'Catalyst::Plugin::Session::State::Cookie';

$ carton install
</code></pre>

<p>MyApp.conf</p>

<pre><code>$vi MyApp.conf

# 추가
&lt;Plugin::Authentication&gt;
&lt;default&gt;
    password_type clear
    user_model    DB::User
    class         SimpleDB
&lt;/default&gt;
&lt;/Plugin::Authentication&gt;
</code></pre>

<h2>Add Login and Logout Controllers</h2>

<p>Controller 생성</p>

<pre><code>$ script/myapp_create.pl controller Login
$ script/myapp_create.pl controller Logout
</code></pre>

<p>Login <a href="https://gist.github.com/3089985">Login.pm</a></p>

<pre><code>$ vi lib/MyApp/Controller/Login.pm
</code></pre>

<p>Logout <a href="https://gist.github.com/3090013">Logout.pm</a></p>

<pre><code>$ vi lib/MyApp/Controller/Logout.pm
</code></pre>

<h2>Add Valid User Check</h2>

<p>Root <a href="https://gist.github.com/3090343">Root.pm</a></p>

<pre><code>$ vi lib/MyApp/Controller/Root.pm
</code></pre>

<h2>추가 해야 할점</h2>

<p>현재는 DB에 유저의 password가 암호화 되지 않음 문서상
다음 내용에 나오기 때문에 추가가 필요함</p>

<h2>CPAN</h2>

<p><a href="https://metacpan.org/module/DBIx::Class::Manual::DocMap">DBIx::Class::Manual::DocMap</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/04/catalyst/">Catalyst</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-04T19:02:00+09:00" pubdate data-updated="true">Jul 4<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/07/04/catalyst/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>DBIx::Class로 스키마 관리하기</h2>

<p><a href="http://advent.perl.kr/2011/2011-12-17.html">jeen</a>님이 발표한 스키마 관리 하기
입니다.</p>

<p>jeen님의 글을 보게 되면 기존의 스키마를 관리하는 방법은 sql의 잦은 교체시 많은 문제점이
발생하고 있다고 서술 합니다.</p>

<p>스키마 관리를 좀더 편하게 하기 위하여 마지막에 서술 하는
<a href="https://metacpan.org/module/dbicdump">dbicdump</a>를 사용하여 간편하게 스키마 관리를 해보도록
합니다.</p>

<p>dbicdump를 사용하기 위해 필요한 ResultBase.pm과 schema.pl파일을 만들어 보도록 하겠습니다.</p>

<h2>schema/schema.pl</h2>

<p><a href="http://rumidier.github.com/blog/2012/07/02/catalyst/">schema.pl 설명</a></p>

<figure class='code'><figcaption><span>schema.pl </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">my</span> <span class="nv">$DB_NAME</span>     <span class="o">=</span> <span class="nv">$ENV</span><span class="p">{</span><span class="n">DB</span><span class="p">}</span>           <span class="o">||</span> <span class="s">&#39;DB_NAME&#39;</span><span class="p">;</span>
</span><span class='line'><span class="k">my</span> <span class="nv">$DB_USER</span>     <span class="o">=</span> <span class="nv">$ENV</span><span class="p">{</span><span class="n">DB_USER</span><span class="p">}</span>     <span class="o">||</span> <span class="s">&#39;DB_USER&#39;</span><span class="p">;</span>
</span><span class='line'><span class="k">my</span> <span class="nv">$DB_PASSWORD</span> <span class="o">=</span> <span class="nv">$ENV</span><span class="p">{</span><span class="n">DB_PASSWORD</span><span class="p">}</span> <span class="o">||</span> <span class="s">&#39;DB_PASSWORD&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="n">schema_class</span> <span class="o">=&gt;</span> <span class="s">&quot;Silex::Schema&quot;</span><span class="p">,</span>
</span><span class='line'><span class="n">connect_info</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">dsn</span>               <span class="o">=&gt;</span> <span class="s">&quot;dbi:mysql:$DB_NAME:127.0.0.1&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="n">user</span>              <span class="o">=&gt;</span> <span class="nv">$DB_USER</span><span class="p">,</span>
</span><span class='line'>  <span class="n">pass</span>              <span class="o">=&gt;</span> <span class="nv">$DB_PASSWORD</span><span class="p">,</span>
</span><span class='line'>  <span class="n">mysql_enable_utf8</span>  <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'><span class="p">},</span>
</span><span class='line'><span class="n">loader_options</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">dump_directory</span>     <span class="o">=&gt;</span> <span class="s">&#39;lib&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="n">naming</span>             <span class="o">=&gt;</span> <span class="p">{</span> <span class="n">ALL</span> <span class="o">=&gt;</span> <span class="s">&#39;v8&#39;</span> <span class="p">},</span>
</span><span class='line'>  <span class="n">skip_load_external</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>  <span class="n">relationships</span>      <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>  <span class="n">use_moose</span>          <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>  <span class="n">only_autoclean</span>     <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>  <span class="n">col_collision_map</span>  <span class="o">=&gt;</span> <span class="s">&#39;column_%s&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="n">result_base_class</span> <span class="o">=&gt;</span> <span class="s">&#39;MyApp::Schema::ResultBase&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="n">overwrite_modifications</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>  <span class="n">datetime_undef_if_invalid</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>  <span class="n">custom_column_info</span> <span class="o">=&gt;</span> <span class="k">sub </span><span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$table</span><span class="p">,</span> <span class="nv">$col_name</span><span class="p">,</span> <span class="nv">$col_info</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nv">$col_name</span> <span class="ow">eq</span> <span class="s">&#39;password&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">{</span> <span class="nv">%</span><span class="p">{</span> <span class="nv">$col_info</span> <span class="p">},</span>
</span><span class='line'>          <span class="n">encode_column</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>          <span class="n">encode_class</span>  <span class="o">=&gt;</span> <span class="s">&#39;Digest&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="n">encode_args</span>   <span class="o">=&gt;</span> <span class="p">{</span> <span class="n">algorithm</span> <span class="o">=&gt;</span> <span class="s">&#39;SHA-1&#39;</span><span class="p">,</span> <span class="nb">format</span> <span class="o">=&gt;</span> <span class="s">&#39;hex&#39;</span> <span class="p">},</span>
</span><span class='line'>          <span class="n">encode_check_method</span> <span class="o">=&gt;</span> <span class="s">&#39;check_password&#39;</span> <span class="p">};</span>
</span><span class='line'>  <span class="p">}</span> <span class="c1"># DB password 설정</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nv">$col_name</span> <span class="ow">eq</span> <span class="s">&#39;created_on&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">{</span> <span class="nv">%</span><span class="p">{</span> <span class="nv">$col_info</span> <span class="p">},</span> <span class="n">set_on_create</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">inflate_datetime</span> <span class="o">=&gt;</span> <span class="mi">1</span> <span class="p">};</span>
</span><span class='line'>  <span class="p">}</span> <span class="c1"># DB created_on 설정</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nv">$col_name</span> <span class="ow">eq</span> <span class="s">&#39;updated_on&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">{</span> <span class="nv">%</span><span class="p">{</span> <span class="nv">$col_info</span> <span class="p">},</span> <span class="n">set_on_create</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">set_on_update</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">inflate_datetime</span> <span class="o">=&gt;</span> <span class="mi">1</span> <span class="p">};</span>
</span><span class='line'>  <span class="p">}</span> <span class="c1"># DB updated_on 설정</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>lib/MyApp/Schema/ResultBase.pm</h2>

<p>ResultBase 클래스의 제약 문제 때문에 result_base_class 값을 지정해 줌으로써 모든 결과
 클래스들은 DBIx::Class::Core가 아닌 MyApp::Schema::ResultBase를 상속받게 합니다.
MyApp::Schema::ResultBase는 개인이 정의 해주는것 이므로 아래를 참조 합니다.</p>

<p>MD5 체크섬 값 아래에 중복되는 코드를 매번 적어주어야 했습니다.
이렇게 사용할 컴포넌트들을 결과클래스 별로 지정하는 대신 ResultBase 클래스를 읽어들입니다.
사실 이처럼 ResultBase를 놓고 여기에 컴포넌트를 일괄해서 읽어들이는 방식은
Cookbook 문서에서도 스타트업 속도 향상을 위해 권장하고 있습니다. - <a href="http://advent.perl.kr/2011/2011-12-17.html">by Jeen</a> -</p>

<p>그리고 컴포넌트의 사용을 위한 컬럼의 속성은 custom_column_info 속성에 코드를 등록해 지정할 수 있습니다.(schema.pl 하단 참조)
 위의 코드처럼 등록하면 created_on 속성에 TimeStamp 컴포넌트를 사용하기 위한 속성 값인 set_on_create 옵션이 모든 결과클래스에 추가됩니다.
(이거 멋지다..)</p>

<figure class='code'><figcaption><span>ResultBase </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>package MyApp::Schema::ResultBase;
</span><span class='line'>use Moose;
</span><span class='line'>use MooseX::NonMoose;
</span><span class='line'>use namespace::autoclean;
</span><span class='line'>
</span><span class='line'>extends 'DBIx::Class::Core';
</span><span class='line'>
</span><span class='line'>__PACKAGE__->load_components(qw/
</span><span class='line'>  InflateColumn::DateTime
</span><span class='line'>  TimeStamp
</span><span class='line'>/);
</span><span class='line'>
</span><span class='line'>__PACKAGE__->meta->make_immutable;
</span><span class='line'>
</span><span class='line'>1;</span></code></pre></td></tr></table></div></figure>


<p>위의 두가지 코드를 작성 하였다면 준비는 끝났습니다.
(<strong>dbicdump는 db 정보를 덤프해서 스키마를 작성</strong>하는 것으로 코드 작성및 작성 후에라도
db가 정의 되어 있어야 합니다.)</p>

<h2>dbicdump 사용하기</h2>

<p>아래를 실행한후 lib/MyApp/Schema/Result에 .pm 파일들이 새로 생성되거나 수정 되었다면 확인을 해보라</p>

<pre><code>$ dbicdump -Ilib schema/schema.pl
</code></pre>

<h2>MakeFile.pl 모듈 추가</h2>

<p>다른 모듈이 더 추가 될수 있습니다 에러 메세지를 확인 하고 필요한 모듈을 더 설치 하세요.</p>

<pre><code>requires "DBIx::Class::TimeStamp";
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/02/catalyst/">Catalyst</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-02T18:13:00+09:00" pubdate data-updated="true">Jul 2<span>nd</span>, 2012</time>
        
         | <a href="/blog/2012/07/02/catalyst/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>DB confing 셋팅 정보</h1>

<pre><code>my $DB_NAME     = $ENV{DB_NAME}     || 'NAME';
my $DB_USER     = $ENV{DB_USER}     || 'USER';
my $DB_PASSWORD = $ENV{DB_PASSWORD} || 'PASSWORD';
</code></pre>

<h1>옵션 내용</h1>

<h2>DBIx::Class::Schema::Loader::Base</h2>

<pre><code>schema_class =&gt; name of the schema class we are building,
</code></pre>

<p>적용</p>

<pre><code>schema_class =&gt; "Project::Schema",
</code></pre>

<hr />

<ul>
<li>dump_directory</li>
</ul>


<p>The value of this option is a perl libdir pathname. Within that directory this module will create a baseline manual DBIx::Class::Schema module set, based on what it creates at runtime.</p>

<p>The created schema class will have the same classname as the one on which you are setting this option (and the ResultSource classes will be based on this name as well).</p>

<p>Normally you wouldn&#8217;t hard-code this setting in your schema class, as it is meant for one-time manual usage.</p>

<p>See &#8220;dump_to_dir&#8221; in DBIx::Class::Schema::Loader for examples of the recommended way to access this functionality.</p>

<p>적용</p>

<pre><code>dump_directory =&gt; 'lib',
</code></pre>

<hr />

<p>naming</p>

<p>Static schemas (ones dumped to disk) will, by default, use the new-style relationship names</p>

<p>and singularized Results, unless you&#8217;re overwriting an existing dump made by an older version</p>

<p>of DBIx::Class::Schema::Loader, in which case the backward compatible RelBuilder will be activated,</p>

<p>and the appropriate monikerization used.</p>

<p>Specifying</p>

<pre><code>naming =&gt; 'current'
</code></pre>

<p>will disable the backward-compatible RelBuilder and use the new-style relationship names along with singularized Results, even when overwriting a dump made with an earlier version.</p>

<p>The option also takes a hashref:</p>

<pre><code>naming =&gt; {
    relationships    =&gt; 'v8',
    monikers         =&gt; 'v8',
    column_accessors =&gt; 'v8',
    force_ascii      =&gt; 1,
}
</code></pre>

<p>or</p>

<pre><code>naming =&gt; { ALL =&gt; 'v8', force_ascii =&gt; 1 }
</code></pre>

<p>The keys are:</p>

<p>ALL</p>

<p>Set &#8220;relationships&#8221;, &#8220;monikers&#8221; and &#8220;column_accessors&#8221; to the specified value.</p>

<p>relationships</p>

<p>How to name relationship accessors.</p>

<p>monikers</p>

<p>How to name Result classes.</p>

<p>column_accessors</p>

<p>How to name column accessors in Result classes.</p>

<p>force_ascii</p>

<p>For &#8220;v8&#8221; mode and later, uses String::ToIdentifier::EN instead of String::ToIdentifier::EM::Unicode to force monikers and other identifiers to ASCII.</p>

<p>The values can be:</p>

<p>current</p>

<p>Latest style, whatever that happens to be.</p>

<p>v4</p>

<p>Unsingularlized monikers, has_many only relationships with no _id stripping.</p>

<p>v5</p>

<p>Monikers singularized as whole words, might_have relationships for FKs on UNIQUE constraints, _id stripping for belongs_to relationships.</p>

<p>Some of the _id stripping edge cases in 0.05003 have been reverted for the v5 RelBuilder.</p>

<p>v6</p>

<p>All monikers and relationships are inflected using Lingua::EN::Inflect::Phrase, and there is more aggressive _id stripping from relationship names.</p>

<p>In general, there is very little difference between v5 and v6 schemas.</p>

<p>v7</p>

<p>This mode is identical to v6 mode, except that monikerization of CamelCase table names is also done better (but best in v8.)</p>

<p>CamelCase column names in case-preserving mode will also be handled better for relationship name inflection (but best in v8.) See &#8220;preserve_case&#8221;.</p>

<p>In this mode, CamelCase &#8220;column_accessors&#8221; are normalized based on case transition instead of just being lowercased, so FooId becomes foo_id.</p>

<p>v8</p>

<p>(EXPERIMENTAL)</p>

<p>The default mode is &#8220;v7&#8221;, to get &#8220;v8&#8221; mode, you have to specify it in &#8220;naming&#8221; explicitly until 0.08 comes out.</p>

<p>&#8220;monikers&#8221; and &#8220;column_accessors&#8221; are created using String::ToIdentifier::EN::Unicode or String::ToIdentifier::EN if &#8220;force_ascii&#8221; is set; this is only significant for names with non-\w characters such as ..</p>

<p>CamelCase identifiers with words in all caps, e.g. VLANValidID are supported correctly in this mode.</p>

<p>For relationships, belongs_to accessors are made from column names by stripping postfixes other than _id as well, for example just Id, _?ref, _?cd, _?code and _?num, case insensitively.</p>

<p>적용</p>

<pre><code>naming =&gt; { ALL =&gt; 'v8' },
</code></pre>

<hr />

<p>relationships</p>

<p>How to name relationship accessors.</p>

<p>적용</p>

<pre><code>relationships =&gt; 1,

# 왜 여기만 1이지? ALL =&gt; v8이었는데?
</code></pre>

<hr />

<p>skip_load_external</p>

<p>Skip loading of other classes in @INC. The default is to merge all other classes with the same name found in @INC into the schema file we are creating.</p>

<p>적용</p>

<pre><code>skip\_load_external =&gt; 1,
</code></pre>

<hr />

<p>use_moose</p>

<p>Creates Schema and Result classes that use Moose, MooseX::NonMoose and MooseX::MarkAsMethods (or namespace::autoclean, see below). The default content after the md5 sum also makes the classes immutable.</p>

<p>It is safe to upgrade your existing Schema to this option.</p>

<p>적용</p>

<pre><code>use_moose          =&gt; 1,
</code></pre>

<hr />

<p>only_autoclean</p>

<p>By default, we use MooseX::MarkAsMethods to remove imported functions from your generated classes. It uses namespace::autoclean to do this, after telling your object&#8217;s metaclass that any operator overloads in your class are methods, which will cause namespace::autoclean to spare them from removal.</p>

<p>This prevents the &#8220;Hey, where&#8217;d my overloads go?!&#8221; effect.</p>

<p>If you don&#8217;t care about operator overloads, enabling this option falls back to just using namespace::autoclean itself.</p>

<p>If none of the above made any sense, or you don&#8217;t have some pressing need to only use namespace::autoclean, leaving this set to the default is recommended.</p>

<p>적용</p>

<pre><code>only_autoclean     =&gt; 1,
</code></pre>

<hr />

<p>col_collision_map</p>

<p>This option controls how accessors for column names which collide with perl methods are named. See &#8220;COLUMN ACCESSOR COLLISIONS&#8221; for more information.</p>

<p>This option takes either a single sprintf format or a hashref of strings which are compiled to regular expressions that map to sprintf formats.</p>

<p>Examples:</p>

<pre><code>col_collision_map =&gt; 'column_%s'

col_collision_map =&gt; { '(.*)' =&gt; 'column_%s' }

col_collision_map =&gt; { '(foo).*(bar)' =&gt; 'column_%s_%s' }
</code></pre>

<p>적용</p>

<pre><code>col_collision_map  =&gt; 'column_%s',
</code></pre>

<hr />

<p>result_base_class</p>

<p>Base class for your table classes (aka result classes). Defaults to &#8216;DBIx::Class::Core&#8217;.</p>

<p>적용</p>

<pre><code>result_base_class =&gt; 'Evid::Schema::ResultBase',
</code></pre>

<hr />

<p>overwrite_modifications</p>

<p>Default false. If false, when updating existing files, Loader will refuse to modify any Loader-generated code that has been modified since its last run (as determined by the checksum Loader put in its comment lines).</p>

<p>If true, Loader will discard any manual modifications that have been made to Loader-generated code.</p>

<p>Again, you should be using version control on your schema classes. Be careful with this option.</p>

<p>적용</p>

<pre><code>overwrite_modifications =&gt; 1,
</code></pre>

<hr />

<p>datetime_undef_if_invalid</p>

<p>Pass a 0 for this option when using MySQL if you DON&#8217;T want datetime_undef_if_invalid => 1 in your column info for DATE, DATETIME and TIMESTAMP columns.</p>

<p>The default is recommended to deal with data such as 00/00/00 which sometimes ends up in such columns in MySQL.</p>

<p>적용</p>

<pre><code>datetime_undef_if_invalid =&gt; 1,
</code></pre>

<hr />

<p>custom_column_info</p>

<p>Hook for adding extra attributes to the column_info for a column.</p>

<p>Must be a coderef that returns a hashref with the extra attributes.</p>

<p>Receives the table object (which stringifies to the unqualified table name), column name and column_info.</p>

<p>For example:</p>

<pre><code>custom_column_info =&gt; sub {
my ($table, $column_name, $column_info) = @_;

if ($column_name eq 'dog' &amp;&amp; $column_info-&gt;{default_value} eq 'snoopy') {
    return { is_snoopy =&gt; 1 };
}
},
</code></pre>

<p>적용</p>

<pre><code>{
loader_options =&gt; {
    custom_column_info =&gt; sub {
    my ($table, $col_name, $col_info) = @_;

    if ($col_name eq 'password') {
        return { %{ $col_info },
            encode_column =&gt; 1,
            encode_class  =&gt; 'Digest',
            encode_args   =&gt; { algorithm =&gt; 'SHA-1', format =&gt; 'hex' },
            encode_check_method =&gt; 'check_password' };
    }

    if ($col_name eq 'created_at') {
        return { %{ $col_info }, set_on_create =&gt; 1, inflate_datetime =&gt; 1 };
    }

    if ($col_name eq 'update_at') {
        return { %{ $col_info }, set_on_create =&gt; 1, set_on_update =&gt; 1, inflate_datetime =&gt; 1 };
    }

    if ($col_name eq 'data') {
        return { %{ $col_info }, serializer_class =&gt; 'JSON' };
    }
    },
},
}
</code></pre>

<hr />

<h2>cpan dbicdump</h2>

<pre><code>connect_info =&gt; {
dsn               =&gt; "dbi:mysql:$DB_NAME:127.0.0.1",
user              =&gt; $DB_USER,
pass              =&gt; $DB_PASSWORD,
mysql_enable_utf8  =&gt; 1,
},
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/25/catalyst/">Catalyst</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-25T19:11:00+09:00" pubdate data-updated="true">Jun 25<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/06/25/catalyst/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Error message</h2>

<p>기존에 사용되던 myweb.conf 파일의
ERROR 500.tt 메세지로 인해 에러 메세지가 제대로 보이지 않아
삭제 했습니다.</p>

<pre><code>$ vi myweb.conf
ERROR 500.tt 삭제
</code></pre>

<h2>Makefile.PL 모듈 추가</h2>

<pre><code>$ vi Makefile.PL
require DateTime::Format::MYSQL
</code></pre>

<h2>DB 날짜 입력</h2>

<p>lib/Silex/Web/Donnenwa/Controller/List.pm</p>

<p>등록시 날짜 생성을 위해 POSIX모듈을 사용합니다. 현재시간에</p>

<p>형식을 DB와 같이  &#8220;%Y-%m-%d% %H:%M:%S&#8221; 만들어 입력합니다.</p>

<pre><code>sub write :Local :Args(0) {
...
use POSIX qw(strftime);

my $time = strftime "%Y-%m-%d% %H:%M:%S", localtime;
my %row = (
applicant  =&gt; $c-&gt;req-&gt;params-&gt;{applicant},
title      =&gt; $c-&gt;req-&gt;params-&gt;{title},
content    =&gt; $c-&gt;req-&gt;params-&gt;{content},
created_on =&gt; "$time",
updated_on =&gt; "$time",
);
...
</code></pre>

<h2>list 페이지 쿼리문 수정</h2>

<p>lib/Silex/Web/Donnenwa/Controller/List.pm</p>

<p>생성될 날짜순으로 출력하기 위한 쿼리문 작성
search의 첫번째 인자는 where문으로써 무시 하기 위해서는 빈 해쉬레퍼를 줍니다.</p>

<pre><code>sub index :Path :Args(0) {
...
my $opt  = { 'order_by' =&gt; { -desc =&gt; 'me.created_on' } };
my $rs = $c-&gt;model('DonDB')-&gt;resultset('Charge')-&gt;search({}, $opt);
...
</code></pre>

<h2>list.tt, list/view.tt 페이지 수정</h2>

<p>root/templates/bootstrap/src/list/index.tt
root/templates/bootstrap/src/list/view.tt</p>

<p>날짜 0000-00-00 형식으로 출력 지정</p>

<pre><code>&lt;td align=center height=20 bgcolor=white&gt;[% list.created_on.ymd %]
</code></pre>

<h2>기타</h2>

<p>날짜 관련 예제</p>

<pre><code>#!/usr/bin/env perl 

use 5.010;
use strict;
use warnings;
use POSIX qw(strftime);
use DateTime;

say "POSOX";
say POSIX::strftime('%Y-%m-%d %H:%M:%S', localtime);

say "DateTime";
say DateTime-&gt;now( time_zone =&gt; 'local' )-&gt;strftime('%Y-%m-%d %H:%M:%S');
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/19/catalyst/">Catalyst</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-19T17:31:00+09:00" pubdate data-updated="true">Jun 19<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/06/19/catalyst/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>/list/write.tt 페이지</h2>

<p><a href="https://gist.github.com/2953030">write.tt</a></p>

<h2>form action</h2>

<pre><code>&lt;form action="[% c.uri_for('/list/write') %]" method="POST"&gt;
</code></pre>

<h2>direction setting</h2>

<pre><code>&lt;td colspan=10 align=center&gt;
  &lt;input type=submit class="btn btn-primary" value="글 저장하기"&gt;
  &amp;nbsp;&amp;nbsp;
  &lt;input type=reset class="btn btn-primary" value="다시 쓰기"&gt;
  &amp;nbsp;&amp;nbsp;
  &lt;a href="[% c.uri_for('/list') %]" class="btn btn-primary"&gt;되돌아가기&lt;/a&gt;
&lt;/td&gt;
</code></pre>

<h2>list -> write</h2>

<pre><code>$ lib/Silex/Web/Donnenwa/Controller/List.pm

sub write :Local :Args(0) {
my ( $self, $c ) = @_;

if ($c-&gt;req-&gt;method eq 'POST') {
    my %row = (
    name    =&gt; $c-&gt;req-&gt;params-&gt;{name},
    title   =&gt; $c-&gt;req-&gt;params-&gt;{title},
    content =&gt; $c-&gt;req-&gt;params-&gt;{content},
    );
    $c-&gt;model('DonDB')-&gt;resultset('List')-&gt;update_or_create(\%row);
    $c-&gt;res-&gt;redirect($c-&gt;uri_for('/list'));
}
}
</code></pre>

<h2>/list/view.tt 페이지</h2>

<p><a href="https://gist.github.com/2953088">view.tt</a></p>

<h2>인자 출력</h2>

<pre><code>// 제목
&lt;tr&gt;
  &lt;td height=20 colspan=4 align=center bgcolor=#999999&gt;
&lt;font color=white&gt;&lt;b&gt;[% users.title %]&lt;/b&gt;&lt;/font&gt;
  &lt;/td&gt;
&lt;/tr&gt;

// 이름
&lt;tr&gt;
  &lt;td width=50 height=20 align=center bgcolor=#EEEEEE&gt;글쓴이&lt;/td&gt;
  &lt;td width=240 bgcolor=white&gt;[% users.name %]&lt;/td&gt;
&lt;/tr&gt;

// 내용
&lt;tr&gt;
  &lt;td bgcolor=white colspan=4 style="table-layout:fixed;"&gt;
&lt;font color=black&gt;
  [% users.content %]
&lt;/font&gt;
  &lt;/td&gt;
&lt;/tr&gt;
</code></pre>

<h2>list page redirect</h2>

<pre><code>&lt;a href="[% c.uri_for('/list') %]" class="btn btn-primary"&gt;되돌아가기&lt;/a&gt;
</code></pre>

<h2>list -> view</h2>

<pre><code>$ lib/Silex/Web/Donnenwa/Controller/List.pm

sub view :Local :CaptureArgs(1) {
my ( $self, $c, $user_id) = @_;

my $rs = $c-&gt;model('DonDB')-&gt;resultset('List')-&gt;find($user_id);
$c-&gt;stash-&gt;{users} = $rs;
}
</code></pre>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/11/12/sublime-text2-vim-mode/">Sublime text2 vim mode</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/24/net-twitter/">Net::Twitter</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/18/month-split/">month-split</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/rumidier">@rumidier</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rumidier',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("rumidier", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/rumidier" class="twitter-follow-button" data-show-count="false">Follow @rumidier</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - rumidier -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rumidier';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
