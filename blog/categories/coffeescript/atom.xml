<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: CoffeeScript | Meadows of wild horses]]></title>
  <link href="http://rumidier.github.com/blog/categories/coffeescript/atom.xml" rel="self"/>
  <link href="http://rumidier.github.com/"/>
  <updated>2012-12-03T17:23:30+09:00</updated>
  <id>http://rumidier.github.com/</id>
  <author>
    <name><![CDATA[rumidier]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[CoffeeScript Tutorial]]></title>
    <link href="http://rumidier.github.com/blog/2012/12/01/coffeescript-tutorial/"/>
    <updated>2012-12-01T20:20:00+09:00</updated>
    <id>http://rumidier.github.com/blog/2012/12/01/coffeescript-tutorial</id>
    <content type="html"><![CDATA[<h1>coffeescript.org</h1>

<h2>Functions</h2>

<p>함수는 <code>-&gt;</code>로 정의 합니다.</p>

<p>``` coffeescript example-01.coffee
square = (x) -> x * x
cube   = (x) -> square(x) * x</p>

<p>alert cube(5)
```</p>

<p>``` js example-01.js
var cube, square;</p>

<p>square = function(x) {
  return x * x;
};</p>

<p>cube = function(x) {
  return square(x) * x;
}
alert(cube(5));
```</p>

<p>함수 생성시 인자를 생성및 전달 할수 있습니다.</p>

<p><code>coffeescript example-02.coffee
fill = (container, liquid = "coffee") -&gt;
  "Filling the #{container} with #{liquid}…"
alert fill("cup")
</code></p>

<p>``` js example-2.js
var fill;</p>

<p>fill = function(container, liquid) {
  if (liquid == null) {</p>

<pre><code>liquid = "coffee";
</code></pre>

<p>  } <br/>
  return "Finling the " + container + " with " + liquid + "...";
};</p>

<p>alert(fill("cup"));
```</p>

<h2>Objects and Arrays</h2>

<p>Array는 ','로 인자를 구분 하며 YAML과 같이 개행 문자로도 구분 가능 합니다.</p>

<p>``` coffeescript example-03.coffee
song = ["do", "re", "mi", "fa", "so"]</p>

<p>singers = {Jagger: "Rock", Elvis: "Roll"}</p>

<p>bitlist = [
  1, 0, 0
  0, 0, 1
  1, 1, 0
]</p>

<p>kids =
  brother:</p>

<pre><code>name: "Max"
age: 11
</code></pre>

<p>  sister:</p>

<pre><code>name: "Ida"
age: 9
</code></pre>

<p>alert song.join("…")
```</p>

<p>``` js example-03.js
var bitlist, kids, singers, song;</p>

<p>song = ["do", "re", "mi", "fa", "so"]
singers = {
  Jagger: "Rokcer",
  Elvis: "Roll"
};</p>

<p>bitlist = [1, 0, 1, 0, 0, 1, 1 , 1, 0];</p>

<p>kids = {
  brother: {</p>

<pre><code>name: "Max",
age: 11
</code></pre>

<p>  },
  sister: {</p>

<pre><code>name: "Ida",
age: 9
</code></pre>

<p>  }
};
alert(song.join(" … "));
```</p>

<p><code>coffeescript example-03-01.coffee
$('.account').attr class: 'active'
log object.class
</code></p>

<h2>Lexical Scoping and Variable Safety(지역변수)</h2>

<p><code>changeNumbers = -&gt;</code>안에 <code>outer</code>값은 외부의 <code>outer</code>의 영향을 받지 않습니다. <code>alert outer</code>와 <code>alert inner</code>의 값은 각 <code>1</code>과 <code>10</code>입니다.</p>

<p>``` coffeescript example-04.coffee
outer = 1
changeNumbers = ->
  inner = -1
  outer = 10
inner = changeNumbers()</p>

<p>alert inner
```</p>

<h2>If, Else, Unless, and Conditional Assignment</h2>

<p><code>singing</code>값이 참일때 <code>mood = greatlyImproved</code>를 리턴 합니다.</p>

<p><code>coffeescript example-05-01.coffee
mood = greatlyImproved if singing
</code></p>

<p><code>happy</code>와 <code>knowIt</code>두개의 값이 참일때와 아닐때를 분류 합니다.</p>

<p><code>coffeescript example-05-02.coffee
if happy and knowIt
  clapsHands()
  chaChaCha()
else
  showIt()
</code></p>

<p>다른 언어의 3항 연산자와 같이 동작 합니다. <code>friday</code>값이 참일때는 <code>sue</code> 아닐때는 <code>jill</code>입니다.<br/>
<code>coffeescript example-05-03.coffee
date = if friday then sue else jill
</code></p>

<h2>Splats...</h2>

<p><code>…</code>(점3개) Array를 잘라 낼수 있습니다. <code>awardMedals contenders…</code> <code>contenders</code>를 분할하여 <code>awardMedals</code>에 정의 됩니다. 여러개의 값이 있고 3개의 변수가 정의 되어 있을때 분할된 첫번째와 두번째는 개별 인자로 정의 되고 나머지 변수에 남은 Array값이 저장 됩니다.</p>

<p>``` coffeescript example-06.coffee
gold = silver = rest = "unknown"</p>

<p>awardMedals = (first, second, others…) ->
  gold   = first
  silver = second
  rest   = others</p>

<p>contenders = [
  "Michael Phelps"
  "Liu Xiang"
  "Yao Ming"
  "Allyson Felix"
  "Shawn Johnson"
  "Roman Sebrle"
  "Guo Jingjing"
  "Tyson Gay"
  "Asafa Powell"
  "Usain Bolt"
]</p>

<p>awardMedals contenders…</p>

<p>alert "Gold: " + gold
alert "Silver: " + siliver
alert "the Field: " + rest
```</p>

<h3>Loops and Comprehensions</h3>

<p>Array의 값은 <code>in</code>으로 가져올수 있습니다 이를 <code>food</code>에 정의 하고 <code>eat</code>함수에 인자로 전달 합니다.
<code>eat food</code>는 <code>.js</code>에서 <code>eat(food);</code> 변환됩니다.</p>

<p><code>coffeescript example-07.coffee
eat food for food in ['tast', 'cheese', 'wine']
</code>
Array값을 받을 변수 <code>dish</code>와 증가값 <code>i</code>정의 합니다. <code>i</code>는 <code>0</code>에서 <code>1</code>씩 증가 합니다.</p>

<p><code>coffeescript example-07-01.coffee
courses = ['greens', 'caviar', 'truffles', 'roast', 'cake']
  menu i + 1, dish for dish, i in courses
</code></p>

<p><code>by</code>는 반복문 실행시 1개씩이 아닌 2개씩 건너뜁니다.</p>

<p><code>coffeescript example-07-011.coffee
evens = (x for x in [0..10] by 2)
</code>
반복문과 비교문을 같이 정의 합니다. <code>isnt</code>는 <code>for</code>문 안에서 <code>if !=</code>으로 변환 됩니다.</p>

<p><code>coffeescript example-07-02.coffee
foods = ['broccoli', 'spinach', 'chocolate']
eat food for food in foods when food isnt 'chocolate'
</code>
<code>name</code>의 길이가 <code>5</code> 미만인 값만을 반환 받습니다.</p>

<p><code>coffeescript example-07-03.coffee
shortNames = (name for name in list when name.length &lt; 5)
</code></p>

<p><code>10..1</code>값들은 Array에 <code>push</code>해 반환 합니다. <code>countdown</code>값은 <code>10,9,8,7,6,5….1</code>값이 됩니다.</p>

<p><code>coffeescript example-08.coffee
countdown = (num for num in [10..1])
</code></p>

<p><code>of</code>는 <code>key</code>: <code>value</code>를 반환 합니다. <code>yearsOld</code>의 key, value가 <code>chile``age</code>로 정의 됩니다.
 <code>ages</code>는 문장 3개를 받습니다.(push)</p>

<p>``` coffeescript example-09.coffee
yearsOld = max: 10, ida: 9, tim: 11</p>

<p>ages = for child, age of yearOld
  "#{child} is #{age}"
```</p>

<p><code>while</code>과 <code>until</code>을 사용 할수 있습니다.</p>

<p>``` coffeescript example-10.coffee</p>

<h1>Econ 101</h1>

<p>if this.studyingEconomics
  buy() while supply > demand
  sell() until supply > demand
```</p>

<p>``` coffeescript example-10-01.coffee</p>

<p><code>num</code>값이 <code>0</code>될때까지 횟수 만큼 문자열을 반환 합니다.</p>

<h1>Nursey Rhyme</h1>

<p>num = 6
lyrics = while num -= 1
  "#{num} little monkeys, jumping on the bed.
  One fell out and bumped his head."
```</p>

<p>coffeescript <code>do</code>의 대한 설명</p>

<pre><code>When using a JavaScript loop to generate functions,
it's common to insert a closure wrapper
in order to ensure that loop variables are closed over,
and all the generated functions don't just share the final values.
CoffeeScript provides the `do` keyword,
which immediately invokes a passed function, forwarding any arguments.     
</code></pre>

<p>``` coffeescript example-11.coffee
for filename in list
  do (filename) -></p>

<pre><code>fs.readFile filename, (err, contents) -&gt;
  compile filename, contents.toString()
</code></pre>

<p>```</p>

<h2>Array Slicing and Splicing with Ranges</h2>

<p><code>start</code>값은 <code>1, 2, 3</code>값을 반환 합니다.
<code>coffeescript example-12.coffee
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9]
start = numbers[0..2]
</code></p>

<p><code>...</code>은 <code>6</code>보다 작은값(6까지가 아님)까지 입니다.
반환값은 <code>4,5,6</code>입니다.</p>

<p><code>coffeescript example-12-01.coffee
middle = numbers[3…6]
</code></p>

<p><code>6</code>번째 자릿수 부터 가져 옵니다. 반환값은
<code>7,8,9</code>입니다.</p>

<p><code>coffeescript example-12-02.coffee
end = numbers[6..]
</code></p>

<p><code>0</code>번째 부터 이므로 모든 값을 가져옵니다.</p>

<p><code>coffeescript example-12-03.coffee
copy = numbers[..]
</code></p>

<p><code>numvers[3..6]</code> 자리에 값과 변경 합니다.</p>

<p><code>coffeescript example-13.coffee
numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
numbers[3..6] = [-3, -4, -5, -6]
</code></p>

<h2>Everything is an Expression (at least, as much as possible)</h2>

<p><code>if</code>/<code>else if</code>/<code>else</code> 구문 입니다. 비교를 2번 할수 있습니다.
<code>if~then~else</code>는 3항 연산자와 같이 쓸수 있습니다.</p>

<p>``` coffeescript example-14.coffee
grade = (student) ->
  if student.excellentWork</p>

<pre><code>"A+"
</code></pre>

<p>  else if student.okayStuff</p>

<pre><code>if student.triedHard then "B" else "B-"
</code></pre>

<p>  else</p>

<pre><code>"C"
</code></pre>

<p>eldest = if 24 > 21 then "Liz" else "Ike"
```</p>

<p>변수 선언과 동시에 계산이 가능 합니다.</p>

<p><code>coffeescript example-15.coffee
six = (one = 1) + (two = 2) + (three = 3)
</code></p>

<p><code>window</code>의 값을 <code>10</code>개 분할합니다.(slice)</p>

<p><code>coffeescript example-16.coffee
globals = (name for name of window)[0…10]
</code></p>

<h3>try/catch</h3>

<p><code>try</code>계산 하고 error가 <code>catch</code>되면 <code>try</code>된 값이 아닌 <code>catch</code>값이 리턴 됩니다.</p>

<p>``` coffeescript example-17.coffee
alert(
  try</p>

<pre><code>nonexistent / underfined
</code></pre>

<p>  catch error</p>

<pre><code>"And the error is … ${error}"
</code></pre>

<p>)
```</p>

<h3>Operators and Aliases</h3>

<pre><code>CoffeeScript    |     JavaScript
    is          |        ===
   isnt         |        !==
    not         |        !
    and         |        &amp;&amp;
    or          |        ||
true, yes, on   |       true
false, no, off  |       false
   @, this      |       this
    of          |       in
    in          |   no JS equivalent
</code></pre>

<p><code>if (ignition === true)</code>와 같습니다.</p>

<p><code>coffeescript example-18-01.coffee
launch() if ignition is on
</code></p>

<p><code>(band !== Spinaltap)</code>과 같습니다.</p>

<p><code>coffeescript example-18-02.coffee
volume = 10 if band isnt SpinalTap
</code></p>

<p><code>unless</code>와 중복 되어 if ( answer !== false)`와 같습니다.</p>

<p><code>coffeescript example-18-03.coffee
letTheWildRumpusBegin() unless answer is no
</code></p>

<p><code>if (car.speed &lt; limit)</code>일때 실행과 같습니다.</p>

<p><code>coffeescript example-18-04.coffee
if car.speed &lt; limit then accelerate()
</code></p>

<p><code>if (pick === 47 || pick === 92 || pick == 13)</code>과 같습니다.</p>

<p><code>coffeescript example-18-05.coffee
winner = yes if pick in [47, 92, 13]
</code></p>

<p><code>print(inspect("My name is this.name));</code>와 같습니다. <code>@</code>는 <code>.js</code>의 this를 의미 합니다.</p>

<p><code>coffeescript example-18-06.coffee
print inspect "My name is #{@name}"
</code></p>

<h2>The Existential Operator</h2>

<p>coffeescript에서 <code>?</code>은 <code>undefined</code>와 <code>null</code>값인지 비교 합니다.
<code>speed ?= 15</code>는 <code>speed</code>가 <code>null</code>인지 검사 합니다.</p>

<p>``` coffeescript example-19.coffee
solipsism = true if mind? and no world?</p>

<p>speed = 0
speed ?= 15
```</p>

<p><code>yeti</code>가 <code>undefiend</code>나 <code>null</code>이 아닐 경우 <code>yeti</code>값을 반환하고 아니라면 <code>bear</code> 를 반환 합니다.
3항 연산자와 같은 형식 입니다.</p>

<p><code>coffeescript example-19-01.coffee
footprints = yeti ? "bear"
</code>
coffeescript의 <code>?.</code>과 <code>.</code></p>

<pre><code>The accessor variant of the existential operator ?.
can be used to soak up null references in a chain of properties.
Use it instead of the dot accessor . in cases where the base value may be null or undefined.
If all of the properties exist then you'll get the expected result,
 if the chain is broken, undefined is returned instead of the TypeError that would be raised otherwise. 
</code></pre>

<p><code>coffeescript example-20.coffee
zip = lottery.drawWinner?().address?.zipcode
</code></p>

<h3>Classes, Inheritance, and Super</h3>

<p><code>class</code>를 선언하고 불러 올수 있습니다.</p>

<p><code>new [class name]</code>을 선언해서 class를 사용 합니다.
사용된 <code>Snake</code>와 <code>Horse</code>에서 <code>extends Animal</code>을 사용 하였으므로
<code>class Animal</code>을 사용 합니다.</p>

<p>``` coffeescript example-21.coffee
class Animal
  constructor: (@name) -></p>

<p>  move: (meters) =></p>

<pre><code>alert @name + " moved #{meters}m."
</code></pre>

<p>class Snake extends Animal
  move: -></p>

<pre><code>alert "Slithering…"
super 5
</code></pre>

<p>class Horse extends Animal</p>

<pre><code>move: -&gt;
  alert "Galloping…"
  super 45
</code></pre>

<p>sam = new Snake "Sammy the Python"
tam = new Horse "Tommy the Palomino"</p>

<p>sam.move()
tom.move()
```</p>

<h3>prototype '::'</h3>

<p><code>::</code>은 <code>.prototype.</code>의 줄임 표현 입니다.
<code>String::dasherize</code>는 <code>String.prototype.dasherize</code>로 변환 됩니다.</p>

<p><code>coffeescript example-22.coffee
String::dasherize = -&gt;
  this.replace /_/g, "-"
</code></p>

<h3>Destructuring Assignment</h3>

<p>선언된 두개의 값을 교환 합니다.</p>

<p>``` coffeescript example-22.coffee
theBait = 1000
theSwitch = 0</p>

<p>[theBait, TheSwitch] = [theSwitch, theBait]
```</p>

<h3>여러값의 반환</h3>

<p>리턴 값으로 <code>locatioin</code>, <code>72</code>, <code>Mostly Sunny</code>값 3개를 한번에 반환 합니다.</p>

<p>``` coffeescript example-23.coffee
weatherReport = (location) ->
  [location, 72, "Mostly Sunny"]</p>

<p>[city, temp, forecast] = weatherReport "Berkeley, CA"
```</p>

<h3>object의 반환</h3>

<p><code>futurists</code> object 값을 반환 합니다.</p>

<p>``` coffeescript example-24.coffee
futurists =
  sculptor: "Umberto Boccioni"
  painter: "Vladimir Burliuk"
  poet:</p>

<pre><code>name: "F.T Marinetti"
address: [
  "Via Roma 42R"
  "Bellagio, Italy 22021"
]
</code></pre>

<p>{poet: {name, address: [street, city]}} = futurists
```</p>

<p><code>split</code>의 반환 값으로 <code>open</code>, <code>contents...</code> <code>close</code> 3군데로 나누어 받습니다. <code>contents...</code>값은 마지막 값 하나를 제외 하고 모든 값을 받습니다.</p>

<p>``` coffeescript example-25.coffee
tag = "<impossible>"</p>

<p>[open, contents…, close] = tag.split("")
```</p>

<h3>Function binding</h3>

<p><code>-&gt;</code>함수 선언전의 <code>(customer, cart)</code>처럼 전달 인자를 정의 해줄수 있습니다.
``` coffeescript example-26.coffee
Account = (customer, cart) ->
  @customer = customer
  @cart = cart</p>

<p>  $('.shopping_cart').bind 'click', (event) =></p>

<pre><code>@customer.purchase @cart
</code></pre>

<p>```</p>

<h3>Embedded JavaScript</h3>

<p>coffeescript 안에서 JavaScript 사용하기 위해서는 backticks가 필요 합니다.
<code>coffeescript example-27.coffee
hi = `function() {
  return [document.title, "Hello JavaScript"].join(": ");
}`
</code></p>

<h3>Switch/When/Else</h3>

<p><code>day</code>값을 <code>when</code>으로 비교 하고 <code>when</code>에 해당 하지 않으면 <code>else</code>를 실행 합니다.</p>

<p>``` coffeescript example-28.coffee
switch day
  when "Mon" then go work
  when "Tue" then go relax
  when "Thu" then go iceFishing
  when "Fri", "Sat"</p>

<pre><code>if day is bingoDay
  go bingo
  go dancing
</code></pre>

<p>  when "Sun" then go church
  else go work
```</p>

<h3>Try/Catch/Finally</h3>

<p><code>try</code> 시도를 하고 결과 같으로 <code>catach</code>와 비교 하여 아니면 <code>finally</code>를 실행 합니다.</p>

<p><code>coffeescript example-29.coffee
try
  allHellBreaksLoose()
  catsAndDogsLivingTogether()
catch error
  print error
finally
  cleanUp()
</code></p>

<h3>Chained Comparisons</h3>

<p><code>cholesterol</code>값이 <code>200</code>보다 작거나 <code>60</code>보다 큰지 검사합니다.</p>

<p>``` coffeescript example-30.coffee
cholesterol = 127</p>

<p>healthy = 200 > cholesterol > 60
```</p>

<h3>String Interpolation, Block Strings, and Block Comments</h3>

<p><code>#{}</code>은 문자열 보간입니다. <code>#{ number / number}</code>사용시 문자로 취급합니다.</p>

<p>``` coffeescript example-31.coffee
quthor = "Wittgenstein"
quote  = "A picture is a fact. -- #{ author }"</p>

<p>sentence = "#{ 22/ 7 } is a decent approximation of ㅠ"
```</p>

<p>coffeescript 는 여러 문장의 개행을 인식 하지 않습니다.</p>

<p><code>coffeescript example.32
mobyDick = "Call me Ishmael. Some years ago --
  never mind how long precisely -- having little
  or no money in my purse, and nothing particular
  to interset me on shore, I thought I would sail
  about a little and see the watery part of the
  world…"
</code></p>

<p>Javascript 변환시 개행문자를 추가 하려면 <code>"""</code>사용해 주어야 합니다.</p>

<p>``` coffeescript example-33.coffee
html = """</p>

<pre><code>&lt;strong&gt;
  cup of coffeescript
&lt;/strong&gt;
"""
</code></pre>

<p>```</p>

<p>coffeescript의 여러줄 주석 입니다.</p>

<p>``` coffeescript example-34.coffee</p>

<pre><code>###
CoffeeScript Compiler v1.4.0
Released under the MIT License
###
</code></pre>

<p>```</p>

<h3>Block Regular Expressions</h3>

<pre><code>OPERATOR = /// ^ (
  ?:[-=]&gt;
   | [-+*/%&lt;&gt;&amp;|^!?=]=
   | &gt;&gt;&gt;=?
   |([-+:])\1
   |([&amp;|&lt;&gt;])\2=?
   |\?\.
   |\.{2,3}
) ///
</code></pre>

<h2>CoffeeScript Style Guide</h2>

<p>CoffeeScript의 문법 사용법을 알려주는 사이트 주소 입니다.
<a href="https://github.com/polarmobile/coffeescript-style-guide">CoffeeScript Style Guide</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[js2coffee]]></title>
    <link href="http://rumidier.github.com/blog/2012/11/29/js2coffee/"/>
    <updated>2012-11-29T15:40:00+09:00</updated>
    <id>http://rumidier.github.com/blog/2012/11/29/js2coffee</id>
    <content type="html"><![CDATA[<h1>Javascript -> CoffeeScript</h1>

<h2>login.js</h2>

<p>기존 <code>login.js</code></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="c1">// login.js&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#login_username&quot;</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><code>login.coffee</code> 작성</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'> <span class="c1"># login.coffee</span>
</span><span class='line'><span class="nx">$</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s">&quot;</span><span class="err">#</span><span class="s">login_username&quot;</span><span class="p">).</span><span class="nx">focus</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>컴파일된 <code>login.js</code>
<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="c1">// login.js</span>
</span><span class='line'><span class="p">(</span><span class="nx">functioni</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#login_username&quot;</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">});</span>
</span><span class='line'><span class="p">}).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>list.js</h2>

<p>기존 <code>list.js</code></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>                                                                  <span class="o">&lt;</span><span class="nx">br</span><span class="o">/&gt;</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#head_checkbox&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="c1">//find all checkboxes</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">cbs</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input:checkbox&quot;</span><span class="p">);</span>
</span><span class='line'><span class="c1">//화면상의 모든 Checkbox 를 찾아서 Head Checkbox 상태와 동기화 합니다. (대장이 체크면 쫄도 모두다 채크)</span>
</span><span class='line'><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span> <span class="nx">cbs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">cbs</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;checkbox&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">cbs</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">checked</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:checked&#39;</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">});</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#do_delete&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="kd">var</span> <span class="nx">selected_charges</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#charge_list tr&#39;</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:has(:checkbox:checked)&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">selected_charges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">))</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">&#39;/list/delete/&#39;</span> <span class="o">+</span> <span class="nx">selected_charges</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">});</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#do_approval&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="kd">var</span> <span class="nx">selected_charges</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#charge_list tr&#39;</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:has(:checkbox:checked)&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">selected_charges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">))</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">&#39;/list/approval/&#39;</span> <span class="o">+</span> <span class="nx">selected_charges</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">});</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#do_refuse&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="kd">var</span> <span class="nx">selected_charges</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#charge_list tr&#39;</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:has(:checkbox:checked)&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">selected_charges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">))</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">&#39;/list/refuse/&#39;</span> <span class="o">+</span> <span class="nx">selected_charges</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">});</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#do_deposit&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="kd">var</span> <span class="nx">selected_charges</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#charge_list tr&#39;</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:has(:checkbox:checked)&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">selected_charges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">))</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">&#39;/deposit/approval/&#39;</span> <span class="o">+</span> <span class="nx">selected_charges</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">});</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#do_export&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="kd">var</span> <span class="nx">selected_charges</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#charge_list tr&#39;</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:has(:checkbox:checked)&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">selected_charges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">))</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">&#39;/deposit/export/&#39;</span> <span class="o">+</span> <span class="nx">selected_charges</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">});</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#do_cancel&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="kd">var</span> <span class="nx">selected_charges</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#charge_list tr&#39;</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:has(:checkbox:checked)&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">selected_charges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">))</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">&#39;/deposit/cancel/&#39;</span> <span class="o">+</span> <span class="nx">selected_charges</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">});</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="nb">window</span><span class="p">.</span><span class="nx">prettyPrint</span> <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span> <span class="nx">prettyPrint</span><span class="p">();</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">{</span><span class="s1">&#39;#start_date&#39;</span><span class="p">}.</span><span class="nx">datepicker</span><span class="p">({</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;yyyy-mm-dd&#39;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">});</span>
</span><span class='line'>  <span class="nb">window</span><span class="p">.</span><span class="nx">prettyPrint</span> <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span> <span class="nx">prettyPrint</span><span class="p">();</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">{</span><span class="s1">&#39;#end_date&#39;</span><span class="p">).</span><span class="nx">datepicker</span><span class="p">({</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;yyyy-mm-dd&#39;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>기존 코드를 <code>.coffee</code> 파일로 수정 한것입니다.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nx">$</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#head_checkobx&#39;</span><span class="p">).</span><span class="nx">click</span> <span class="o">-&gt;&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nv">flag = </span><span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="o">is</span><span class="p">(</span><span class="s">&#39;:checked&#39;</span><span class="p">)</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s">&#39;:checkbox&#39;</span><span class="p">).</span><span class="nx">each</span> <span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="nx">flag</span> <span class="k">then</span> <span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;checked&#39;</span><span class="p">,</span> <span class="s">&#39;checked&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">else</span> <span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s">&#39;checked&#39;</span><span class="p">)</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nx">code</span><span class="o">&gt;&lt;/</span><span class="nx">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.btn&#39;</span><span class="p">).</span><span class="nx">click</span> <span class="o">-&gt;&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nv">select_id = </span><span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">).</span><span class="nx">substring</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span class='line'><span class="nv">selected_charges = </span><span class="p">[]</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s">&#39;#charge_list tr&#39;</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s">&#39;:has(:checkbox:checked)&#39;</span><span class="p">).</span><span class="nx">each</span> <span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">)</span> <span class="o">isnt</span> <span class="kc">undefined</span>
</span><span class='line'>    <span class="nx">selected_charges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">))</span>
</span><span class='line'><span class="nv">location.href = </span><span class="s">&quot;/list/</span><span class="si">#{</span><span class="nx">select_id</span><span class="si">}</span><span class="s">/</span><span class="si">#{</span><span class="nx">selected_charges</span><span class="si">}</span><span class="s">&quot;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nx">code</span><span class="o">&gt;&lt;/</span><span class="nx">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="nb">window</span><span class="p">.</span><span class="nx">prettyPrint</span> <span class="o">and</span> <span class="nx">prettyPrint</span><span class="p">()</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#start_date, #end_date&#39;</span><span class="p">).</span><span class="nx">datepicker</span><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nv">format: </span><span class="s">&#39;yyyy-mm-dd&#39;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nx">code</span><span class="o">&gt;&lt;/</span><span class="nx">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>head_checkbox</h3>

<p><code>#head_checkbox</code>는 최상의 checkbox 컨트롤러 이며 하위 checkbox 들을 조정 합니다.
체크시 하위 모든 checkbox가 모두 클릭 되며 미클릭시 하위 checkbox 또한 미클릭으로 전환 합니다.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#head_checkbox&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="c1">//find all checkboxes</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">cbs</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input:checkbox&quot;</span><span class="p">);</span>
</span><span class='line'><span class="c1">//화면상의 모든 Checkbox 를 찾아서 Head Checkbox 상태와 동기화 합니다. (대장이 체크면 쫄도 모두다 채크)</span>
</span><span class='line'><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span> <span class="nx">cbs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">cbs</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;checkbox&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">cbs</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">checked</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:checked&#39;</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>수정된 <code>head_checkbox</code> 코드</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nx">$</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#head_checkbox&#39;</span><span class="p">).</span><span class="nx">click</span> <span class="o">-&gt;&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nv">flag = </span><span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="o">is</span><span class="p">(</span><span class="s">&#39;:checked&#39;</span><span class="p">)</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s">&#39;:checkbox&#39;</span><span class="p">).</span><span class="nx">each</span> <span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="nx">flag</span> <span class="k">then</span> <span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;checked&#39;</span><span class="p">,</span> <span class="s">&#39;checked&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">else</span> <span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s">&#39;checked&#39;</span><span class="p">)</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nx">code</span><span class="o">&gt;&lt;/</span><span class="nx">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>.btn 클릭</h3>

<p><code>#do_xxx</code>클릭시 발생되는 코드 입니다. 코드 중복상태가 많은 기존의 <code>.js</code> 입니다.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#do_delete&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="kd">var</span> <span class="nx">selected_charges</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#charge_list tr&#39;</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:has(:checkbox:checked)&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">selected_charges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">))</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">&#39;/list/delete/&#39;</span> <span class="o">+</span> <span class="nx">selected_charges</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">});</span>
</span><span class='line'><span class="err">…</span><span class="p">.</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#do_approval&#39;</span><span class="p">)</span><span class="err">…</span><span class="p">.</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#do_change&#39;</span><span class="p">)</span><span class="err">…</span>
</span><span class='line'><span class="err">…</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#do_cancel&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="kd">var</span> <span class="nx">selected_charges</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#charge_list tr&#39;</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:has(:checkbox:checked)&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">selected_charges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">))</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">&#39;/deposit/cancel/&#39;</span> <span class="o">+</span> <span class="nx">selected_charges</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><code>#do_xxx</code>클릭시 개별적으로 선언 된것을 coffee로 수정 하면서 <code>.btn</code>클릭 이벤트 발생시
아이디의 <code>#do_</code>제외한 문자열을 추출 하여 필요한 동작을 완성 하였습니다.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s">&#39;.btn&#39;</span><span class="p">).</span><span class="nx">click</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">select_id = </span><span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">).</span><span class="nx">substring</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span class='line'>  <span class="nv">selected_charges = </span><span class="p">[]</span><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#charge_list tr&#39;</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s">&#39;:has(:checkbox:checked)&#39;</span><span class="p">).</span><span class="nx">each</span> <span class="o">-&gt;&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="k">if</span> <span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">)</span> <span class="o">isnt</span> <span class="kc">undefined</span>
</span><span class='line'>  <span class="nx">selected_charges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">))</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nx">code</span><span class="o">&gt;&lt;/</span><span class="nx">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="nv">location.href = </span><span class="s">&quot;/deposit/${select_id}/${selected_charges}&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>반복 코드 중첩</h3>

<p>기존에 반복 되던 코드 <code>.js</code></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">prettyPrint</span> <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span> <span class="nx">prettyPrint</span><span class="p">();</span>
</span><span class='line'><span class="nx">$</span><span class="p">{</span><span class="s1">&#39;#start_date&#39;</span><span class="p">}.</span><span class="nx">datepicker</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;yyyy-mm-dd&#39;</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">prettyPrint</span> <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span> <span class="nx">prettyPrint</span><span class="p">();</span>
</span><span class='line'><span class="nx">$</span><span class="p">{</span><span class="s1">&#39;#end_date&#39;</span><span class="p">).</span><span class="nx">datepicker</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;yyyy-mm-dd&#39;</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>중첩 시켜 짧게 만드는 <code>.coffee</code></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">prettyPrint</span> <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span> <span class="nx">prettyPrint</span><span class="p">();</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s">&#39;#start_date, #end_date&#39;</span><span class="p">).</span><span class="nx">datepicker</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>list_write.js</h2>

<p>기존 <code>list_write.js</code></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="nx">functoiin</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#title&#39;</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>수정 <code>list_write.coffee</code></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nx">$</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#title&#39;</span><span class="p">).</span><span class="nx">focus</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>write_validation.js</h2>

<p>기존 <code>write_validation.js</code></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#w_form&#39;</span><span class="p">).</span><span class="nx">validate</span><span class="p">({</span>
</span><span class='line'>   <span class="nx">rules</span><span class="o">:</span> <span class="p">{</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span> <span class="nx">title</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>   <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'> <span class="p">},</span>
</span><span class='line'> <span class="nx">amount</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>   <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">number</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'> <span class="p">}</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>   <span class="p">},</span><span class="o">&lt;</span><span class="nx">br</span><span class="o">/&gt;</span>
</span><span class='line'>  <span class="nx">messages</span><span class="o">:</span> <span class="p">{</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nx">title</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">required</span><span class="o">:</span> <span class="s2">&quot;제목을 입력해 주세요&quot;</span>
</span><span class='line'><span class="p">},</span>
</span><span class='line'><span class="nx">amount</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">required</span><span class="o">:</span> <span class="s2">&quot;금액을 입력해 주세요&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">number</span><span class="o">:</span> <span class="s2">&quot;숫자만 입력해 주세요&quot;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="p">}</span>
</span><span class='line'> <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>수정 <code>write_validatioin.coffee</code></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nx">$</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#w_form&#39;</span><span class="p">).</span><span class="nx">validation</span><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nv">rules:</span>
</span><span class='line'>  <span class="nv">title:</span>
</span><span class='line'>    <span class="nv">required: </span><span class="kc">true</span>
</span><span class='line'>  <span class="nv">amount:</span>
</span><span class='line'>    <span class="nv">required: </span><span class="kc">true</span>
</span><span class='line'>    <span class="nv">number: </span><span class="kc">true</span>
</span><span class='line'><span class="nv">messages:</span>
</span><span class='line'>  <span class="nv">title:</span>
</span><span class='line'>    <span class="nv">required: </span><span class="s">&quot;제목을 입력해 주세요&quot;</span>
</span><span class='line'>  <span class="nv">amount:</span>
</span><span class='line'>    <span class="nv">required: </span><span class="s">&quot;금액을 입력해 주세요&quot;</span>
</span><span class='line'>    <span class="nv">number: </span><span class="s">&quot;숫자만 입력해 주세요&quot;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nx">code</span><span class="o">&gt;&lt;/</span><span class="nx">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Coffee Script 시작하기]]></title>
    <link href="http://rumidier.github.com/blog/2012/11/19/coffee-script/"/>
    <updated>2012-11-19T12:23:00+09:00</updated>
    <id>http://rumidier.github.com/blog/2012/11/19/coffee-script</id>
    <content type="html"><![CDATA[<h3>사용 환경</h3>

<ul>
<li>모델명    :     MacBook Pro</li>
<li>모델 식별자:     MacBookPro8,1</li>
<li>프로세서 이름:   Intel Core i5</li>
<li>프로세서 속도:    2.3 GHz</li>
<li>메모리:         4 GB</li>
<li>기타: homebrew, iTerm</li>
</ul>


<h3>CoffeeScript 설치</h3>

<p>CoffeeScript - CoffeeScript is a little language that compiles into JavaScript</p>

<h3>CoffeeScript 공식 사이트</h3>

<p>CoffeeScript 공식 사이트 주소는 <a href="http://coffeescript.org/">CoffeeScript 사이트</a>
입니다.</p>

<h3>npm - coffee-script 설치를 위한 패키지 매니저</h3>

<p>coffee-script를 다운 받기 위해서는 npm이 필요 하고 별도로 설치 해야 하며
<code>npm</code> 설치를 위한 파일은 아래의 링크에서 다운로드 받습니다.</p>

<p><a href="http://nodejs.org/download/">npm 다운로드</a></p>

<h3>node-v.8.x.x.pkg 설치</h3>

<p>개인 OS에 맞는 파일을 선택해 다운 받고 설치 합니다. 다음은 Mac 에서의
<code>.pkg</code> 실행시 첫화면과 마지막 화면 입니다.</p>

<p><img src="https://lh5.googleusercontent.com/-eUicOa-fhtQ/UKXCFOGz27I/AAAAAAAAACE/9LBj6Kzdn-8/%25252FUsers%25252Fhancho%25252FPictures%25252Fnode-01.jpg" width="500" height="500" title="&#34;node.pkg 설치 시작&#34;" alt="&#34;node.pkg 설치 시작&#34;">
<img src="https://lh5.googleusercontent.com/-Smr4TJfxMgI/UKXEkWDOYWI/AAAAAAAAACM/soEN5qpthGg/%25252FUsers%25252Fhancho%25252FPictures%25252Fnode-02.jpg" width="500" height="500" title="&#34;node.pkg 설치 끝&#34;" alt="&#34;node.pkg 설치 끝&#34;"></p>

<h3>coffee-script 설치</h3>

<p><code>npm</code>을 사용해 <code>coffee-script</code>를 설치해 줍니다.</p>

<pre><code>hancho@hanjoui-MacBook-Pro:~$ sudo npm install -g coffee-script
Password:
npm http GET https://registry.npmjs.org/coffee-script
npm http 304 https://registry.npmjs.org/coffee-script
/usr/local/bin/coffee -&gt; /usr/local/lib/node_modules/coffee-script/bin/ coffee
/usr/local/bin/cake -&gt; /usr/local/lib/node_modules/coffee-script/bin/cake
coffee-script@1.4.0 /usr/local/lib/node_modules/coffee-script
</code></pre>

<h3>CoffeeScript 사용방법</h3>

<h4>CoffeeScript 시작하기</h4>

<pre><code>테스트를 위한 폴더를 생성후 `style.less` 파일을 만듭니다.

   $ mkdir Coffee-Start
   $ cd Coffee-Start
   $ touch style.coffee
</code></pre>

<h4>style.coffee 작성</h4>

<p><code>coffee</code>가 동작 확인을 위해 테스트 파일를 작성합니다.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>style.coffee  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">fill</span> <span class="o">=</span> <span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">liquid</span> <span class="o">=</span> <span class="s2">&quot;coffee&quot;</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="s2">&quot;Filling the #{container} with #{liquid}...&quot;</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">alert</span> <span class="nx">fill</span><span class="p">(</span><span class="s2">&quot;cup&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h4>.coffee -> .js 변환하기</h4>

<p>  .coffee 파일 작성후 .js 파일로 변환합니다. 파일명은 style.coffee의 style.js로 변환됩니다.</p>

<pre><code>    $ coffee --compile style.coffee
    $ ls
    style.coffee style.js
</code></pre>

<h4>.coffee -> .js 지켜보기</h4>

<p>  <code>--watch</code> 옵션으로 style.coffee 파일 내용이 갱신(저장)시
  <code>.js</code>파일로 변환 됩니다. 종료는 Ctrl + C 키로 할수있습니다.</p>

<pre><code>    $ coffee --watch --compile style.coffee
    11:55:26 - compiled style.coffee
</code></pre>

<h4>coffeescript - .coffee 확인 하기</h4>

<p><code>.html</code> 파일 내에서 <code>.js</code> 파일로 변환 없이 .coffee를 검사 할수있습니다.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>coffee.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'>  <span class="nt">&lt;head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://jashkenas.github.com/coffee-script/extras/coffee-script.js&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/coffeescript&quot;</span><span class="nt">&gt;</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nx">fill</span> <span class="o">=</span> <span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">liquid</span> <span class="o">=</span> <span class="s2">&quot;coffee&quot;</span><span class="p">)</span> <span class="o">-&amp;</span><span class="nx">gt</span><span class="p">;</span>
</span><span class='line'>  <span class="s2">&quot;Filling the #{container} with #{liquid}...&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nx">alert</span> <span class="nx">fill</span><span class="p">(</span><span class="s2">&quot;cup&quot;</span><span class="p">)</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="nt">&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/head&gt;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h4>coffeescript - .js 확인하기</h4>

<p><code>.html</code> 파일 내에서 변환된 <code>.js</code> 내용을 검사 할수있습니다.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>coffee.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'>  <span class="nt">&lt;head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://jashkenas.github.com/coffee-script/extras/coffee-script.js&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script&gt;</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="kd">var</span> <span class="nx">fill</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nx">fill</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">liquid</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">liquid</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">liquid</span> <span class="o">=</span> <span class="s2">&quot;coffee&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="s2">&quot;Filling the &quot;</span> <span class="o">+</span> <span class="nx">container</span> <span class="o">+</span> <span class="s2">&quot; with &quot;</span> <span class="o">+</span> <span class="nx">liquid</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="nx">alert</span><span class="p">(</span><span class="nx">fill</span><span class="p">(</span><span class="s2">&quot;cup&quot;</span><span class="p">));</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>  <span class="nt">&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/head&gt;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>
]]></content>
  </entry>
  
</feed>
